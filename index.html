<!DOCTYPE html>


<html lang="en">
<head>
</head>
<body>
<canvas id = "canv" style="width: 100%; height: 100%;" />
</body>

<script src = "PolygonSprite.js"></script>
<script>


(function(){
    var context = {};
    var canvas = {};
    var then = {};  
    var entities = [];

    var main = function () {
        var now = Date.now();
        var delta = now - then;

        update(delta / 1000);
        render();

        then = now;
        requestAnimationFrame(main);
    };

    var update = function(modifier){
        entities.forEach(function(entity){
            entity.update(modifier);
        });
    }

    var render = function(){
        entities.forEach(function(entity){
            entity.render();
        });
    }

    var resizeCanvas = function () {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }

    var initPolygon = function (x, y, sideLength, sides) {
        var e1 = new PolygonSprite(context, x, y, 6, 50);
        entities.push(e1);
    }

    var initPolygons = function (x, y, sideLength, sides) { 
        var spacing = 2;
        var angledWidth = sideLength*Math.cos((2*Math.PI) / sides);
        var angledHeight = sideLength*Math.sin((2*Math.PI) / sides);
        initPolygon(x, y, sideLength, sides);
        initPolygon(x + (sideLength + angledWidth + spacing), y + (angledHeight + spacing), sideLength, sides);
        initPolygon(x - (sideLength + angledWidth + spacing), y + (angledHeight + spacing), sideLength, sides);

        initPolygon(x - (sideLength + angledWidth + spacing), y - (angledHeight + spacing), sideLength, sides);
        initPolygon(x + (sideLength + angledWidth + spacing), y - (angledHeight + spacing), sideLength, sides);

        initPolygon(x + spacing, y + (2*angledHeight + spacing), sideLength, sides);  
        initPolygon(x + spacing, y - (2*angledHeight + spacing), sideLength, sides);    
    }



    canvas = document.getElementById('canv');
    context = canvas.getContext('2d');

    window.addEventListener('resize', resizeCanvas, false); 

    main();
    resizeCanvas();
    initPolygons(canvas.width/2, canvas.height/2, 50, 6);
})();


</script>